name: Replace Text and Set as Env Var

on:
  workflow_dispatch:
    inputs:
      input_text:
        description: 'Input text where some words will be replaced'
        required: true
        default: 'hello foo world'

jobs:
  replace-and-export:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Replace text and set as env var
        id: modify_text
        run: |
          echo "Original input: $INPUT_TEXT"
          MODIFIED_TEXT="${INPUT_TEXT//PROD/STAGE}"
          echo "Modified text: $MODIFIED_TEXT"
          
          # Export modified text as an output
          echo "modified_text=$MODIFIED_TEXT" >> $GITHUB_OUTPUT
        env:
          INPUT_TEXT: ${{ github.event.inputs.input_text }}

      - name: Use modified env var
        run: |
          echo "Using modified env var:"
          echo "MODIFIED_TEXT=${{ steps.modify_text.outputs.modified_text }}"
